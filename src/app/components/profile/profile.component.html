<section id="content">
    <div class="container">
        <!-- <div class="col-3 content__header">
            <h2>Profile</h2>
        </div> --><img src="{{link}}">
        <div class="row">
            <div class="col-12 col-md-4 content__body min-padding">
                <div class="profile__editBtn text-right" *ngIf="authUsername">
                    <a class="btn btn-warning" routerLink="/p/{{ user.username }}/edit">Ubah Profil</a>
                </div>
                <div class="profile__photo text-center">
                    <img [src]="user.photoUrl" *ngIf="user.photoUrl?.length > 0; else defaultPhoto">
                    <ng-template #defaultPhoto>
                            <img src="../../../assets/component/images/user.png">
                    </ng-template>
                </div>
                <div class="profile__data text-center">
                    <h3>{{ user.nama }}</h3>
                    <p>@{{ user.username }}</p>
                        <button class="btn btn-primary followBtn" (click)="follow(user.username)" *ngIf="!authUsername && following == false">Follow</button>
                        <button class="btn btn-danger followBtn" (click)="unfollow(user.username)" *ngIf="!authUsername && following == true">Unfollow</button>
                    <hr>
                    <ul class="text-left">
                        <li><i class="fa fa-map-marker-alt"></i> {{ user.kota }}</li>
                        <li><i class="fa fa-envelope"></i>{{ user.email }}</li>
                        <li><i class="fa fa-phone"></i>{{ user.telp }}</li>
                    </ul>
                </div>
            </div>
            <div class="col-12 col-md-7 content__body" *ngIf="user.level != 4; else guestTab">
                <h5>Kajian Saya</h5>
                <div class="kajian-saya">
                    <div *ngIf="kajian?.length > 0; else noData">
                        <div class="col">
                            <ul>
                                <li *ngFor="let data of kajian">
                                    <a routerLink="/d/{{ data.id }}" *ngIf="data.poster?.length > 0; else noImg">
                                        <img [src]="data.poster">
                                    </a>
                                </li>
                            </ul>
                        </div>     
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<ng-template #noData>
    <p class="text-center small-grey">Data kajian anda tidak ditemukan.</p>
</ng-template>
<ng-template #noFollowing>
    <p class="text-center small-grey">
        Anda tidak mengikuti siapapun.
    </p>
</ng-template>
<ng-template #guestTab>
    <div class="col-12 col-md-7 content__body">
        <h5>Following</h5>
        <div class="kajian-saya">
            <div *ngIf="kajian?.length > 0; else noFollowing">
                <div class="col">
                    <ul>
                        <li *ngFor="let data of kajian">
                            <a routerLink="/d/{{ data.id }}" *ngIf="data.poster?.length > 0; else noImg">
                                <img [src]="data.poster">
                            </a>
                        </li>
                    </ul>
                </div>     
            </div>
        </div>
    </div>
</ng-template>